# MAVROS Configuration for Crossflight (ArduRover) - ROS2 Format
# Based on official apm_config.yaml and apm_pluginlists.yaml

/**:
  ros__parameters:
    # Connection settings
    fcu_protocol: "v2.0"
    system_id: 20
    component_id: 240

    # Plugin allowlist - only essential plugins for GPS/IMU
    plugin_allowlist:
      - imu
      - gps_status
      - global_position
      - local_position
      - sys
      - command
      - param
      - battery
      - rc_io
      - time

# IMU plugin configuration
/**/imu:
  ros__parameters:
    frame_id: "base_link"
    linear_acceleration_stdev: 0.0003
    angular_velocity_stdev: 0.0003490659
    orientation_stdev: 1.0
    magnetic_stdev: 0.0

# Global position plugin
/**/global_position:
  ros__parameters:
    frame_id: "map"
    child_frame_id: "base_link"
    rot_covariance: 0.0001745329
    use_relative_alt: true
    tf:
      send: false
      frame_id: "map"
      global_frame_id: "earth"
      child_frame_id: "base_link"

# Local position plugin
/**/local_position:
  ros__parameters:
    frame_id: "map"
    tf:
      send: false
      frame_id: "map"
      child_frame_id: "base_link"

# System plugin
/**/sys:
  ros__parameters:
    min_voltage: [10.0]
    disable_diag: false

# Time sync plugin
/**/time:
  ros__parameters:
    time_ref_source: "fcu"
    timesync_mode: MAVLINK
    timesync_avg_alpha: 0.6

# Command plugin
/**/cmd:
  ros__parameters:
    use_comp_id_system_control: false

# Battery plugin
/**/battery:
  ros__parameters:
    voltage_cov: 0.01
