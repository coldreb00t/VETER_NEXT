; PlatformIO Project Configuration File for ESP32 Sensor Hub
;
; This firmware manages all sensors and publishes data via DroneCAN:
; - 4x HC-SR04 ultrasonic sensors (collision avoidance)
; - BME280 temperature/humidity/pressure sensor
; - Camera servo control (pan/tilt)
; - LED lighting control
;
; Hardware: ESP32-S3 DevKit with 16MB flash and 8MB PSRAM
; DroneCAN Node ID: 11

[env:esp32-s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; Board configuration
board_build.flash_size = 16MB
board_build.psram_type = opi
board_build.partitions = default_16MB.csv

; Upload and monitor settings
upload_speed = 921600
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Build flags
build_flags =
    -D ARDUINO_USB_CDC_ON_BOOT=1
    -D BOARD_HAS_PSRAM
    -D CONFIG_SPIRAM_CACHE_WORKAROUND
    ; DroneCAN node configuration
    -D DRONECAN_NODE_ID=11
    -D DRONECAN_NODE_NAME=\"ESP32_SensorHub\"
    ; Enable debug output
    -D DEBUG_ENABLED=1
    -D CORE_DEBUG_LEVEL=3

; Required libraries
lib_deps =
    ; CAN bus and DroneCAN
    coryjfowler/MCP_CAN_lib @ ^1.5.1
    ; BME280 sensor (I2C)
    adafruit/Adafruit BME280 Library @ ^2.2.2
    adafruit/Adafruit Unified Sensor @ ^1.1.14
    ; HC-SR04 ultrasonic sensors
    teckel12/NewPing @ ^1.9.7
    ; Servo control for camera
    madhephaestus/ESP32Servo @ ^3.0.5
    ; Status LED
    fastled/FastLED @ ^3.7.8

; Extra scripts (optional)
; extra_scripts =
;     pre:scripts/check_prerequisites.py
;     post:scripts/generate_firmware_info.py
